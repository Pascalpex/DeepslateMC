From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Pascalpex <pascalpex@gmail.com>
Date: Mon, 21 Mar 2022 15:24:16 +0100
Subject: [PATCH] Toggleable op command


diff --git a/src/main/java/net/minecraft/commands/Commands.java b/src/main/java/net/minecraft/commands/Commands.java
index bbc476ddd42b2d42a7208c79d39056faf56a5b16..53a3ecc7719c5c0876f176342d50373159435b3f 100644
--- a/src/main/java/net/minecraft/commands/Commands.java
+++ b/src/main/java/net/minecraft/commands/Commands.java
@@ -243,7 +243,9 @@ public class Commands {
             BanListCommands.register(this.dispatcher);
             BanPlayerCommands.register(this.dispatcher);
             DeOpCommands.register(this.dispatcher);
-            OpCommand.register(this.dispatcher);
+            if (Config.getOpActive()) { // Deepslate - Toggleable op command
+                OpCommand.register(this.dispatcher);
+            }
             PardonCommand.register(this.dispatcher);
             PardonIpCommand.register(this.dispatcher);
             PerfCommand.register(this.dispatcher);
diff --git a/src/main/java/net/pascalpex/deepslatemc/Config.java b/src/main/java/net/pascalpex/deepslatemc/Config.java
index 97119bdc69d79216241bf1cf0c0b2ae5b230134b..8e3c0ae0486535a940f517bbcef23572d4cef724 100644
--- a/src/main/java/net/pascalpex/deepslatemc/Config.java
+++ b/src/main/java/net/pascalpex/deepslatemc/Config.java
@@ -33,6 +33,9 @@ public class Config {
             if(!config.contains("maintenance")) {
                 config.set("maintenance", false);
             }
+            if(!config.contains("opCommandActive")) {
+                config.set("opCommandActive", true);
+            }
             save();
         } catch (IOException | InvalidConfigurationException e) {
             e.printStackTrace();
@@ -47,6 +50,9 @@ public class Config {
         }
     }
 
+    public static boolean getOpActive() {
+        return config.getBoolean("opCommandActive");
+    }
     public static String getDiscordLink() {
         return config.getString("discordLink");
     }
