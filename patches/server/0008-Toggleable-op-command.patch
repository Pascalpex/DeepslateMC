From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Pascalpex <pascalpex@gmail.com>
Date: Mon, 21 Mar 2022 15:24:16 +0100
Subject: [PATCH] Toggleable op command


diff --git a/src/main/java/net/minecraft/commands/Commands.java b/src/main/java/net/minecraft/commands/Commands.java
index e254b9a190056b3fb81ff3679cdf733b37a52f85..56693b7b02b80371f57ed04beb8caaab3d87b00f 100644
--- a/src/main/java/net/minecraft/commands/Commands.java
+++ b/src/main/java/net/minecraft/commands/Commands.java
@@ -203,7 +203,9 @@ public class Commands {
             BanListCommands.register(this.dispatcher);
             BanPlayerCommands.register(this.dispatcher);
             DeOpCommands.register(this.dispatcher);
-            OpCommand.register(this.dispatcher);
+            if (Config.getOpActive()) { // Deepslate - Toggleable op command
+                OpCommand.register(this.dispatcher);
+            }
             PardonCommand.register(this.dispatcher);
             PardonIpCommand.register(this.dispatcher);
             PerfCommand.register(this.dispatcher);
diff --git a/src/main/java/net/pascalpex/deepslatemc/Config.java b/src/main/java/net/pascalpex/deepslatemc/Config.java
index 5d65ca0019450b16102acb94756d14df523620e0..44200c0056fca59b312e5e9115b17e0bb69437bd 100644
--- a/src/main/java/net/pascalpex/deepslatemc/Config.java
+++ b/src/main/java/net/pascalpex/deepslatemc/Config.java
@@ -29,6 +29,9 @@ public class Config {
                 if(!config.contains("discordLink")) {
                     config.set("discordLink", "https://google.de/");
                 }
+                if(!config.contains("opCommandActive")) {
+                    config.set("opCommandActive", true);
+                }
                 save();
             } catch (IOException | InvalidConfigurationException e) {
                 e.printStackTrace();
@@ -43,6 +46,10 @@ public class Config {
             }
         }
 
+        public static boolean getOpActive() {
+            return config.getBoolean("opCommandActive");
+        }
+
         public static String getDiscordLink() {
             return config.getString("discordLink");
         }
